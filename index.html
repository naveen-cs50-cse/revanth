<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Run Python in HTML</title>
  <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
  <script defer src="https://pyscript.net/latest/pyscript.js"></script>
</head>
<body>

  <h1>Python Code in HTML (PyScript)</h1>

  <py-script>
    import streamlit as st
import requests
import pandas as pd
import matplotlib.pyplot as plt
import time

# Title and subheader
st.title('üìä Cryptocurrency Dashboard')
st.subheader('üíπ Live Updates from CoinGecko')

# Sidebar configuration
refresh_rate = st.sidebar.slider("‚è± Refresh every N seconds", 5, 60, 10)
auto_refresh = st.sidebar.checkbox("Auto-refresh")

# Coin list and target currency
coins = ["bitcoin", "ethereum", "solana", "cardano"]
currency = "usd"
prices = {}

# Fetch live prices from CoinGecko
for coin in coins:
    url = f"https://api.coingecko.com/api/v3/simple/price?ids={coin}&vs_currencies={currency}"
    response = requests.get(url)
    data = response.json()
    prices[coin.capitalize()] = data[coin][currency]

# Convert to DataFrame and display
df = pd.DataFrame(prices.items(), columns=["Coin", "Price (USD)"])
st.table(df)

# Bar chart using Matplotlib
fig, ax = plt.subplots()
ax.bar(df["Coin"], df["Price (USD)"], color=['red', 'yellow', 'green', 'pink'])
ax.set_ylabel("Price in USD")
ax.set_title("Current Prices of Selected Cryptos")
st.pyplot(fig)

# Auto-refresh logic
if auto_refresh:
    time.sleep(refresh_rate)
    st.experimental_rerun()

  </py-script>

</body>
</html>
